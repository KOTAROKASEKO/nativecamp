<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>„Åà„ÅÑ„Åî„ÅÆ„ÇØ„Ç§„Ç∫ÔºÅ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=M+PLUS+Rounded+1c:wght@400;700;800&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'M PLUS Rounded 1c', sans-serif;
            background-color: #f0f9ff; /* Light blue sky background */
        }
        .quiz-container {
            background-color: #ffffff;
            border-radius: 24px;
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
            border: 4px solid #4ade80; /* Fun green border */
        }
        .question-card {
            background-color: #fffbeb; /* Light yellow card */
            border: 2px solid #facc15; /* Yellow border */
            transition: transform 0.2s ease-in-out;
        }
        .question-card:hover {
            transform: translateY(-5px);
        }
        .option-btn {
            transition: all 0.2s ease;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .option-btn:hover {
            transform: scale(1.05);
        }
        .option-btn.selected {
            transform: scale(1.1);
            box-shadow: 0 8px 12px rgba(0,0,0,0.15);
            border-width: 4px;
        }
        .check-btn {
            background: linear-gradient(135deg, #fb923c, #f97316); /* Orange gradient */
            text-shadow: 1px 1px 2px rgba(0,0,0,0.2);
            transition: all 0.3s ease;
            box-shadow: 0 5px #d97706;
        }
        .check-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 7px #d97706;
        }
        .check-btn:active {
            transform: translateY(2px);
            box-shadow: 0 3px #d97706;
        }
        .feedback {
            font-weight: 800;
            font-size: 1.5rem;
        }
        .correct {
            color: #22c55e; /* Green */
        }
        .incorrect {
            color: #ef4444; /* Red */
        }
        .correct-answer {
            background-color: #dcfce7; /* Light green highlight */
            color: #166534; /* Dark green text */
            border: 2px dashed #22c55e;
        }
    </style>
</head>
<body class="p-4 sm:p-6 md:p-8">

    <div id="quiz" class="quiz-container max-w-2xl mx-auto p-6 sm:p-8">
        <!-- Header -->
        <div class="text-center mb-8">
            <h1 class="text-3xl sm:text-4xl font-extrabold text-blue-600 drop-shadow-lg">„Åà„ÅÑ„Åî„ÅÆ„ÇØ„Ç§„Ç∫„Åü„ÅÑ„Åã„ÅÑÔºÅ</h1>
            <p class="mt-2 text-lg text-gray-600">"take", "do", "make" „ÅÆ„Å§„Åã„ÅÑ„Åã„Åü</p>
        </div>

        <!-- Questions will be inserted here by JavaScript -->
        <div id="questions-container" class="space-y-6"></div>

        <!-- Check Answers Button -->
        <div class="mt-10 text-center">
            <button id="check-answers-btn" class="check-btn text-white font-bold py-4 px-10 rounded-full text-2xl">
                „Åì„Åü„Åà„ÅÇ„Çè„Åõ
            </button>
        </div>
    </div>

    <script>
        // --- Quiz Data ---
        // This is where all the questions for our quiz are stored.
        const quizData = [
            {
                emoji: 'üì∑',
                sentence: '„Åó„ÇÉ„Åó„Çì„Çí',
                options: ['take', 'do', 'make'],
                correct: 'take',
                answer_jp: '„Åó„ÇÉ„Åó„Çì„Çí„Å®„Çã'
            },
            {
                emoji: 'üìù',
                sentence: '„Åó„ÇÖ„Åè„Å†„ÅÑ„Çí',
                options: ['take', 'do', 'make'],
                correct: 'do',
                answer_jp: '„Åó„ÇÖ„Åè„Å†„ÅÑ„Çí„Åô„Çã'
            },
            {
                emoji: 'üéÇ',
                sentence: '„Åë„Éº„Åç„Çí',
                options: ['take', 'do', 'make'],
                correct: 'make',
                answer_jp: '„Åë„Éº„Åç„Çí„Å§„Åè„Çã'
            },
            {
                emoji: 'üõÄ',
                sentence: '„Åä„Åµ„Çç„Å´',
                options: ['take', 'do', 'make'],
                correct: 'take',
                answer_jp: '„Åä„Åµ„Çç„Å´„ÅØ„ÅÑ„Çã'
            },
            {
                emoji: 'ü•ã',
                sentence: '„Åã„Çâ„Å¶„Çí',
                options: ['take', 'do', 'make'],
                correct: 'do',
                answer_jp: '„Åã„Çâ„Å¶„Çí„Åô„Çã'
            },
            {
                emoji: 'üõèÔ∏è',
                sentence: '„Åπ„Å£„Å©„Çí',
                options: ['take', 'do', 'make'],
                correct: 'make',
                answer_jp: '„Åπ„Å£„Å©„Çí„Å®„Å®„ÅÆ„Åà„Çã'
            },
            {
                emoji: 'üöå',
                sentence: '„Å∞„Åô„Å´',
                options: ['take', 'do', 'make'],
                correct: 'take',
                answer_jp: '„Å∞„Åô„Å´„ÅÆ„Çã'
            },
            {
                emoji: 'üçΩÔ∏è',
                sentence: '„Åä„Åï„Çâ„Çí',
                options: ['take', 'do', 'make'],
                correct: 'do',
                answer_jp: '„Åä„Åï„Çâ„Çí„ÅÇ„Çâ„ÅÜ'
            }
        ];

        // --- Global Variables ---
        const questionsContainer = document.getElementById('questions-container');
        const checkAnswersBtn = document.getElementById('check-answers-btn');
        let userAnswers = new Array(quizData.length).fill(null); // Store user's choices

        // --- Functions ---

        /**
         * Creates and displays all the quiz questions on the page.
         */
        function renderQuestions() {
            quizData.forEach((question, index) => {
                // Create the main card for the question
                const questionCard = document.createElement('div');
                questionCard.className = 'question-card p-5 rounded-xl';
                questionCard.id = `question-${index}`;

                // Create the question text part
                const questionText = `
                    <div class="flex items-center mb-4">
                        <span class="text-5xl mr-4">${question.emoji}</span>
                        <p class="text-2xl font-bold text-gray-800">${question.sentence} (  ) „ÄÇ</p>
                        <div id="feedback-${index}" class="feedback ml-auto"></div>
                    </div>
                `;

                // Create the option buttons
                const optionsContainer = document.createElement('div');
                optionsContainer.className = 'flex justify-center space-x-3 sm:space-x-4';

                question.options.forEach(option => {
                    const button = document.createElement('button');
                    button.textContent = option;
                    button.className = 'option-btn w-1/3 py-3 text-xl font-bold rounded-lg border-2 border-b-4';
                    // Set colors for each button
                    if (option === 'take') {
                        button.classList.add('bg-sky-400', 'border-sky-600', 'text-white');
                    } else if (option === 'do') {
                        button.classList.add('bg-amber-400', 'border-amber-600', 'text-white');
                    } else {
                        button.classList.add('bg-rose-400', 'border-rose-600', 'text-white');
                    }
                    
                    // Add click event to handle user selection
                    button.addEventListener('click', () => selectOption(index, option, button));
                    optionsContainer.appendChild(button);
                });
                
                // Add an area for the correct answer to be shown later
                const answerContainer = `
                    <div id="answer-container-${index}" class="mt-4 text-center" style="display: none;">
                        <p class="correct-answer inline-block px-4 py-2 rounded-lg font-bold text-lg">
                            „Åõ„ÅÑ„Åã„ÅÑÔºö ${question.answer_jp} „ÅØ <span class="capitalize">${question.correct}</span> „Çí„Å§„Åã„ÅÜ„ÇàÔºÅ
                        </p>
                    </div>
                `;

                // Combine all parts and add to the page
                questionCard.innerHTML = questionText + optionsContainer.outerHTML + answerContainer;
                questionsContainer.appendChild(questionCard);
            });
        }

        /**
         * Handles what happens when a user clicks an option button.
         * @param {number} questionIndex - The index of the question.
         * @param {string} selectedOption - The option the user clicked ('take', 'do', 'make').
         * @param {HTMLElement} clickedButton - The button element that was clicked.
         */
        function selectOption(questionIndex, selectedOption, clickedButton) {
            // Store the user's answer
            userAnswers[questionIndex] = selectedOption;

            // Update button styles to show which is selected
            const parent = clickedButton.parentElement;
            // First, remove 'selected' from any other button in this question
            parent.querySelectorAll('.option-btn').forEach(btn => btn.classList.remove('selected'));
            // Then, add 'selected' to the clicked button
            clickedButton.classList.add('selected');
        }

        /**
         * Checks all the answers, displays feedback, and shows the correct answers.
         */
        function checkAnswers() {
            quizData.forEach((question, index) => {
                const feedbackEl = document.getElementById(`feedback-${index}`);
                const isCorrect = userAnswers[index] === question.correct;

                // Show feedback icon (circle or cross)
                if (userAnswers[index] === null) {
                    feedbackEl.textContent = 'ü§î'; // Thinking face if no answer
                } else if (isCorrect) {
                    feedbackEl.textContent = '‚≠ïÔ∏è';
                    feedbackEl.classList.add('correct');
                } else {
                    feedbackEl.textContent = '‚ùå';
                    feedbackEl.classList.add('incorrect');
                }

                // Show the correct answer text
                const answerContainer = document.getElementById(`answer-container-${index}`);
                answerContainer.style.display = 'block';

                // Disable all buttons for this question
                const questionCard = document.getElementById(`question-${index}`);
                questionCard.querySelectorAll('.option-btn').forEach(btn => {
                    btn.disabled = true;
                    btn.style.opacity = '0.7';
                    btn.style.cursor = 'not-allowed';
                });
            });

            // Disable the "Check Answers" button after it's clicked
            checkAnswersBtn.disabled = true;
            checkAnswersBtn.textContent = '„Åä„Å§„Åã„Çå„Åï„ÅæÔºÅ';
            checkAnswersBtn.style.opacity = '0.7';
            checkAnswersBtn.style.cursor = 'not-allowed';
            checkAnswersBtn.style.background = '#9ca3af'; // Gray color
            checkAnswersBtn.style.boxShadow = '0 5px #6b7280';
        }

        // --- Event Listeners ---
        checkAnswersBtn.addEventListener('click', checkAnswers);

        // --- Initial Load ---
        // This starts the whole process when the page loads.
        renderQuestions();

    </script>
</body>
</html>
